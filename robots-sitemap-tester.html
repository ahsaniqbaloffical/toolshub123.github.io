<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Robots.txt & Sitemap Tester | Toolshub123</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {font-family:'Syne',sans-serif;margin:0;background:#f4f6f8;color:#333;}
    .container {max-width:900px;margin:40px auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.1);}
    h1 {text-align:center;color:#0A192F;}
    textarea {width:100%;height:200px;padding:10px;border:1px solid #ccc;border-radius:6px;}
    button {margin-top:10px;padding:10px 16px;border:none;border-radius:6px;font-weight:600;cursor:pointer;}
    .btn-primary {background:#00BFA6;color:#fff;}
    .btn-secondary {background:#007BFF;color:#fff;}
    table {width:100%;border-collapse:collapse;margin-top:15px;}
    th,td {border:1px solid #ddd;padding:8px;text-align:left;}
    th {background:#f4f6f8;}
    .badge {padding:2px 6px;border-radius:4px;font-size:12px;color:#fff;}
    .valid {background:#28a745;}
    .warning {background:#ffc107;color:#000;}
    .error {background:#dc3545;}
    .summary {margin-top:15px;padding:10px;background:#f9f9f9;border-radius:6px;}
  </style>
</head>
<body>
<div class="container">
  <h1>Robots.txt & Sitemap Tester</h1>
  <p>Paste your <code>robots.txt</code> or <code>sitemap.xml</code> content below:</p>
  <textarea id="inputText" placeholder="Paste robots.txt or sitemap.xml here..."></textarea>
  <button class="btn-primary" onclick="analyzeInput()">Analyze</button>
  <button class="btn-secondary" onclick="downloadCSV()">Download Report (CSV)</button>
  <button onclick="copySummary()">Copy Summary</button>

  <div id="results" style="display:none;">
    <div class="summary" id="summary"></div>
    <table id="resultsTable">
      <thead><tr><th>Entry</th><th>Type</th><th>Status</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
function analyzeInput(){
  const text=document.getElementById("inputText").value.trim();
  if(!text){alert("Paste robots.txt or sitemap.xml content.");return;}
  let errors=0,warnings=0,valid=0,urls=0,directives=0;
  const rows=[];
  if(text.startsWith("<")){ // assume sitemap XML
    const xml=new DOMParser().parseFromString(text,"application/xml");
    const locs=[...xml.getElementsByTagName("loc")];
    const lastmods=[...xml.getElementsByTagName("lastmod")];
    urls=locs.length;
    if(urls===0){errors++;rows.push(["No <loc> entries","Sitemap","❌","error"]);} 
    locs.forEach((loc,i)=>{
      const url=loc.textContent.trim();
      if(url){valid++;rows.push([url,"URL","Valid","valid"]);} else {errors++;rows.push(["Empty <loc>","URL","❌","error"]);}
      if(!lastmods[i]) warnings++;
    });
  } else { // assume robots.txt
    const lines=text.split(/\r?\n/);
    lines.forEach(line=>{
      const l=line.trim(); if(!l) return;
      const parts=l.split(":");
      if(parts.length<2){warnings++;rows.push([l,"Directive","Unknown","warning"]);return;}
      const key=parts[0].toLowerCase();
      directives++;
      if(["user-agent","disallow","allow","sitemap"].includes(key)){
        valid++;rows.push([l,"Directive","Valid","valid"]);
      } else {
        warnings++;rows.push([l,"Directive","Unknown","warning"]);
      }
    });
  }
  let score=100-errors*10-warnings*5;
  if(valid===0) score-=20;
  if(score<0) score=0;
  const summary=`URLs: ${urls} | Directives: ${directives} | Errors: ${errors} | Warnings: ${warnings} | Compliance Score: ${score}`;
  document.getElementById("summary").textContent=summary;
  const tbody=document.querySelector("#resultsTable tbody");
  tbody.innerHTML="";
  rows.forEach(r=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${r[0]}</td><td>${r[1]}</td><td><span class="badge ${r[3]}">${r[2]}</span></td>`;
    tbody.appendChild(tr);
  });
  document.getElementById("results").style.display="block";
  window.__report={summary,rows};
}

function downloadCSV(){
  const d=window.__report; if(!d){alert("Run analysis first.");return;}
  let csv="Entry,Type,Status\n";
  d.rows.forEach(r=>{csv+=`"${r[0]}","${r[1]}","${r[2]}"\n`;});
  csv+="\nSummary,"+d.summary.replace(/\|/g,",");
  const blob=new Blob([csv],{type:"text/csv"}),url=URL.createObjectURL(blob),a=document.createElement("a");
  a.href=url;a.download="report.csv";document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);
}

function copySummary(){
  const d=window.__report; if(!d){alert("Run analysis first.");return;}
  navigator.clipboard.writeText(d.summary);
  alert("Summary copied to clipboard!");
}
</script>
</body>
</html>
